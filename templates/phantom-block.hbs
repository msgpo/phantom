{{#if (and details.onDemand details.entity)}}
  <h1 class="p-title">{{fa-icon "info-circle" fixedWidth=true}} Info</h1>
  <div>
    <span class="p-key">Name: </span>
    <span class="p-value">{{details.entity}}</span>
  </div>
  <p>
    Status: <b>This Entity does not exist in Phantom</b>
  </p>
  <div class="view-in-ts create-in-phantom">
    <a class="p-link" href={{details.link}}>Create Event in Phantom Dashboard
      {{fa-icon "external-link-square" class="external-link-icon"}}</a>
  </div>

  <h1 class="p-title">{{fa-icon "info-circle" fixedWidth=true}} Create Event and Run Playbook</h1>

  <select class="w-100" size=5 onchange={{action (mut container.__selectedPlaybookId) value="target.value"}}>
    {{#each details.playbooks as |playbook index|}}
      <option value="{{playbook.id}}">{{playbook.name}}</option>
    {{/each}}
  </select>
  <div class="d-flex flex-row justify-content-between align-items-center">
    <div>
      {{#if container.__message}}
        <span class="message">{{container.__message}}</span>
      {{/if}}
    </div>
    <button {{action "runPlaybook" containerIndex null container.__selectedPlaybookId}}
            class="p-btn btn btn-light mt-1">Run Playbook
    </button>
  </div>
  {{#if message.length}}
    <span class="message">{{message}}</span>
  {{/if}}
{{else}}
  {{#each containers as |container containerIndex|}}
    {{#if (gt containerIndex 0)}}
      <hr>
    {{/if}}

    <h1 class="p-title">
      {{fa-icon "info-circle" fixedWidth=true}} Info
    </h1>
    <div>
      <span class="p-key">Name:</span>
      <span class="p-value">{{container.name}}</span>
    </div>
    <div>
      <span class="p-key">Status:</span>
      <span class="p-value">{{container.status}}</span>
    </div>
    <div>
      <span class="p-key">Severity:</span>
      <span class="p-value">{{container.severity}}</span>
    </div>
    <div>
      <span class="p-key">Sensitivity:</span>
      <span class="p-value">{{container.sensitivity}}</span>
    </div>
    <div>
      <span class="p-key">Label:</span>
      <span class="p-value">{{container.label}}</span>
    </div>

    {{#if container.description}}
      <h1 class="p-title">{{fa-icon "file" fixedWidth=true}} Description</h1>
      <p>
        <i>{{container.description}}</i>
      </p>
    {{/if}}

    {{#if container.tags.length}}
      <h1 class="p-title">{{fa-icon "labels" fixedWidth=true}} Tags</h1>
      <ul>
        {{#each container.tags as |tag|}}
          <li>
            {{tag}}
          </li>
        {{/each}}
      </ul>
    {{/if}}

    <h1 class="p-title">{{fa-icon "book" fixedWidth=true}} Playbooks</h1>
    {{!-- Leaving here until we have an overlay window based power-select
    {{#power-select
            options=details.playbooks
            selected=selectedPlaybook
            searchEnabled=true
            searchField="name"
            placeholder="Playbooks"
            onchange=(action (mut selectedPlaybook)) as |playbook|}}
      {{humanize playbook.name}}
    {{/power-select}}
    --}}
    <select class="w-100" size=5 onchange={{action (mut container.__selectedPlaybookId) value="target.value"}}>
      {{#each details.playbooks as |playbook index|}}
        <option value="{{playbook.id}}">{{playbook.name}}</option>
      {{/each}}
    </select>
    <div class="d-flex flex-row justify-content-between align-items-center">
      <div>
        {{#if container.__message}}
          <span class="message">{{container.__message}}</span>
        {{/if}}
      </div>
      <button {{action "runPlaybook" containerIndex container.id container.__selectedPlaybookId}}
              class="p-btn btn btn-light mt-1">Run Playbook
      </button>
    </div>

    {{#if container.playbooksRan.length}}
      <h1 class="p-title">{{fa-icon "history" fixedWidth=true}} Playbook Run History</h1>
      <div class="wrap-container">
        {{#each container.playbooksRan as |playbookRun|}}
          <span class="playbook-container">
                {{playbookRun.playbookName}} (
            {{#if (gt playbookRun.successCount 0)}}
              <span style="color: green; font-weight: 500;">Succ {{playbookRun.successCount}}</span>
              {{if (or (gt playbookRun.pendingCount 0) (gt playbookRun.failureCount 0)) ","}}
            {{/if}}
            {{#if (gt playbookRun.pendingCount 0)}}
              <span style="color: orange; font-weight: 500;">Pend {{playbookRun.pendingCount}}</span>
              {{if (gt playbookRun.failureCount 0) ","}}
            {{/if}}
            {{#if (gt playbookRun.failureCount 0)}}
              <span style="color: red; font-weight: 500;">Fail {{playbookRun.failureCount}}</span>
            {{/if}})
              </span>
        {{/each}}
      </div>
    {{/if}}
  {{/each}}
{{/if}}